<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>ull-esit-inf-dsi-22-23-prct10-fs-proc-sockets-funko-app-alu0101437538</title><meta name="description" content="Documentation for ull-esit-inf-dsi-22-23-prct10-fs-proc-sockets-funko-app-alu0101437538"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base=".">
<div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<div class="field">
<div id="tsd-toolbar-links"></div></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">ull-esit-inf-dsi-22-23-prct10-fs-proc-sockets-funko-app-alu0101437538</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-8 col-content">
<div class="tsd-page-title">
<h2>ull-esit-inf-dsi-22-23-prct10-fs-proc-sockets-funko-app-alu0101437538</h2></div>
<div class="tsd-panel tsd-typography">
<a href="#ull-esit-inf-dsi-22-23-prct10-fs-proc-sockets-funko-app-alu0101437538" id="ull-esit-inf-dsi-22-23-prct10-fs-proc-sockets-funko-app-alu0101437538" style="color: inherit; text-decoration: none;">
  <h1>ull-esit-inf-dsi-22-23-prct10-fs-proc-sockets-funko-app-alu0101437538</h1>
</a>

<a href="#práctica-10---apis-asíncronas-de-gestión-del-sistema-de-ficheros-creación-de-procesos-y-creación-de-sockets-de-nodejs" id="práctica-10---apis-asíncronas-de-gestión-del-sistema-de-ficheros-creación-de-procesos-y-creación-de-sockets-de-nodejs" style="color: inherit; text-decoration: none;">
  <h1>Práctica 10 - APIs asíncronas de gestión del sistema de ficheros, creación de procesos y creación de sockets de Node.js</h1>
</a>

<a href="#aday-chocho-aisa" id="aday-chocho-aisa" style="color: inherit; text-decoration: none;">
  <h4>Aday Chocho Aisa</h4>
</a>

<a href="#índice" id="índice" style="color: inherit; text-decoration: none;">
  <h2>Índice</h2>
</a>
<ol>
<li>Introducción</li>
<li>Ejercicios<ul>
<li>Ejercicio 1</li>
<li>Ejercicio 2</li>
<li>Aplicación de FunkoPops</li>
<li>Ejercicio PE</li>
</ul>
</li>
<li>Conclusiones</li>
<li>Referencias bibliográficas</li>
</ol>

<a href="#1-introducción" id="1-introducción" style="color: inherit; text-decoration: none;">
  <h2>1. Introducción</h2>
</a>
<p>Esta práctica consiste en realizar ejercicios que empleen o utilicen la APIs asíncronas de gestión del sistema de ficheros,  la creación de procesos y la creación de sockets,  siendo uno de los ejercicios el rediseño del ejercicio de funkoPops de la semana pasada. Para ello, se utilizaran distintos modulos como Events, fs, net y child_process. Además, también se recoge en el informe el ejercicio realizado durante la sesión de clase.</p>
<p>En la práctica se debería emplear una metodología TDD, se documenta automáticamente con TypeDoc e incluye flujos de trabajo de GitHub Actions para llevar a cabo las pruebas, para manejar los datos de cubrimiento (Coveralls) y para el análisis de la calidad y seguridad del código (Sonar Cloud), pero por falta de tiempo no se han realizado pruebas.</p>

<a href="#2-ejercicios" id="2-ejercicios" style="color: inherit; text-decoration: none;">
  <h2>2. Ejercicios</h2>
</a>

<a href="#21-ejercicio-1" id="21-ejercicio-1" style="color: inherit; text-decoration: none;">
  <h3>2.1. Ejercicio 1</h3>
</a>
<p>El ejercicio consiste en hacer una traza de ejecución mostrando, paso a paso, el contenido de la pila de llamadas, el registro de eventos de la API y la cola de manejadores, además de lo que se muestra por la consola.</p>
<pre><code class="language-typescript"><span class="hl-0">import</span><span class="hl-1"> {</span><span class="hl-2">access</span><span class="hl-1">, </span><span class="hl-2">constants</span><span class="hl-1">, </span><span class="hl-2">watch</span><span class="hl-1">} </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;fs&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">length</span><span class="hl-1"> !== </span><span class="hl-4">3</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Please, specify a file&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">} </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">filename</span><span class="hl-1"> = </span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">[</span><span class="hl-4">2</span><span class="hl-1">];</span><br/><br/><span class="hl-1">  </span><span class="hl-5">access</span><span class="hl-1">(</span><span class="hl-2">filename</span><span class="hl-1">, </span><span class="hl-2">constants</span><span class="hl-1">.</span><span class="hl-7">F_OK</span><span class="hl-1">, (</span><span class="hl-2">err</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">err</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`File </span><span class="hl-6">${</span><span class="hl-2">filename</span><span class="hl-6">}</span><span class="hl-3"> does not exist`</span><span class="hl-1">);</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`Starting to watch file </span><span class="hl-6">${</span><span class="hl-2">filename</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">);</span><br/><br/><span class="hl-1">      </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">watcher</span><span class="hl-1"> = </span><span class="hl-5">watch</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">[</span><span class="hl-4">2</span><span class="hl-1">]);</span><br/><br/><span class="hl-1">      </span><span class="hl-2">watcher</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;change&#39;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`File </span><span class="hl-6">${</span><span class="hl-2">filename</span><span class="hl-6">}</span><span class="hl-3"> has been modified somehow`</span><span class="hl-1">);</span><br/><span class="hl-1">      });</span><br/><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`File </span><span class="hl-6">${</span><span class="hl-2">filename</span><span class="hl-6">}</span><span class="hl-3"> is no longer watched`</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">}</span>
</code></pre>
<ul>
<li><p>La traza es la siguiente:</p>
<ul>
<li>La primera función es access, la cual contiene otra función. Entra a la pila de llamadas y manda esta última que pasa al Web Api, el cual lo manda a la cola.</li>
<li>Como no hay nada más en la pila de llamadas, se ejecuta la función de dentro de access.</li>
<li>Entra a la pila de llamadas y se ejecuta el console.log de &quot;Starting to watch file ficherosTexto/helloworld.txt&quot;</li>
<li>Se encuentra el watcher del fichero, el cual pasa a la web API a la espera de un cambio en el fichero.</li>
<li>Entra a la pila de llamadas y se ejecuta el console.log de &quot;File ficherosTexto/helloworld.txt is no longer watched&quot;</li>
<li>Modificamos el fichero, se activa el manejador watcher y ejecuta el maejador de evento &quot;change&quot;. Se manda el código a la cola, y como no hay nada en la pila de llamadas, mueve el código a la pila de llamadas y ejecuta el console.log de &quot;File ficherosTexto/helloworld.txt has been modified somehow&quot;.</li>
<li>Cada vez que se modifique el ficher helloworld.txt, se repetirá el apartado anterior.</li>
</ul>
</li>
<li><p>Access permite comprobar el acceso al fichero o directorio especificado, así como los permisos.</p>
</li>
<li><p>Constant es un objeto que ofrece constantes relacionadas con fs.</p>
</li>
</ul>
<p>Como resultado, después de las dos modificaciones se ha mostrado lo siguiente por la consola:</p>
<pre><code><span class="hl-2">Starting</span><span class="hl-1"> </span><span class="hl-2">to</span><span class="hl-1"> </span><span class="hl-2">watch</span><span class="hl-1"> </span><span class="hl-2">file</span><span class="hl-1"> </span><span class="hl-2">ficherosTexto</span><span class="hl-1">/</span><span class="hl-2">helloworld</span><span class="hl-1">.</span><span class="hl-2">txt</span><br/><span class="hl-2">File</span><span class="hl-1"> </span><span class="hl-2">ficherosTexto</span><span class="hl-1">/</span><span class="hl-2">helloworld</span><span class="hl-1">.</span><span class="hl-2">txt</span><span class="hl-1"> </span><span class="hl-2">is</span><span class="hl-1"> </span><span class="hl-2">no</span><span class="hl-1"> </span><span class="hl-2">longer</span><span class="hl-1"> </span><span class="hl-2">watched</span><br/><span class="hl-2">File</span><span class="hl-1"> </span><span class="hl-2">ficherosTexto</span><span class="hl-1">/</span><span class="hl-2">helloworld</span><span class="hl-1">.</span><span class="hl-2">txt</span><span class="hl-1"> </span><span class="hl-2">has</span><span class="hl-1"> </span><span class="hl-2">been</span><span class="hl-1"> </span><span class="hl-2">modified</span><span class="hl-1"> </span><span class="hl-2">somehow</span><br/><span class="hl-2">File</span><span class="hl-1"> </span><span class="hl-2">ficherosTexto</span><span class="hl-1">/</span><span class="hl-2">helloworld</span><span class="hl-1">.</span><span class="hl-2">txt</span><span class="hl-1"> </span><span class="hl-2">has</span><span class="hl-1"> </span><span class="hl-2">been</span><span class="hl-1"> </span><span class="hl-2">modified</span><span class="hl-1"> </span><span class="hl-2">somehow</span><br/><span class="hl-2">File</span><span class="hl-1"> </span><span class="hl-2">ficherosTexto</span><span class="hl-1">/</span><span class="hl-2">helloworld</span><span class="hl-1">.</span><span class="hl-2">txt</span><span class="hl-1"> </span><span class="hl-2">has</span><span class="hl-1"> </span><span class="hl-2">been</span><span class="hl-1"> </span><span class="hl-2">modified</span><span class="hl-1"> </span><span class="hl-2">somehow</span><br/><span class="hl-2">File</span><span class="hl-1"> </span><span class="hl-2">ficherosTexto</span><span class="hl-1">/</span><span class="hl-2">helloworld</span><span class="hl-1">.</span><span class="hl-2">txt</span><span class="hl-1"> </span><span class="hl-2">has</span><span class="hl-1"> </span><span class="hl-2">been</span><span class="hl-1"> </span><span class="hl-2">modified</span><span class="hl-1"> </span><span class="hl-2">somehow</span>
</code></pre>

<a href="#22-ejercicio-2" id="22-ejercicio-2" style="color: inherit; text-decoration: none;">
  <h3>2.2. Ejercicio 2</h3>
</a>
<p>En este ejercicio había que escribir una aplicación que proporcione información sobre el número de líneas, palabras o caracteres que contiene un fichero de texto. A ella se le pasan tanto la ruta el fichero como lo que se desee ver (-l/--lines para lineas, -w/--words para las palabras y -c/--characters para caracteres, puediendo combinarse y contando con que si no hay ninguna se mostrarán todas las opciones). El ejercicio había que realizarlo de dos maneras diferentes: Haciendo uso del método pipe de un Stream y sin hacer uso del método pipe (mediante subprocesos). El código es el siguiente</p>
<pre><code class="language-typescript"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">spawn</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;child_process&quot;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">yargs</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;yargs&quot;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">hideBin</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;yargs/helpers&quot;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">chalk</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;chalk&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">yargs</span><span class="hl-1">(</span><span class="hl-5">hideBin</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">))</span><br/><span class="hl-1">  .</span><span class="hl-5">command</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-3">&quot;pipeReadFile&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">&quot;Permite leer los datos de un fichero mediante el uso de tuberias&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-2">file:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Nombre del fichero&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-2">lines:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">alias:</span><span class="hl-1"> </span><span class="hl-3">&quot;l&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Muestra el número de lineas&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;boolean&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-2">words:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">alias:</span><span class="hl-1"> </span><span class="hl-3">&quot;w&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Muestra el número de palabras&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;boolean&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-2">characters:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">alias:</span><span class="hl-1"> </span><span class="hl-3">&quot;c&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Muestra el número de caracteres&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;boolean&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    (</span><span class="hl-2">argv</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">try</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">opciones</span><span class="hl-1"> = [</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">file</span><span class="hl-1">];</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">words</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">opciones</span><span class="hl-1">.</span><span class="hl-5">push</span><span class="hl-1">(</span><span class="hl-3">&quot;-w&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">lines</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">opciones</span><span class="hl-1">.</span><span class="hl-5">push</span><span class="hl-1">(</span><span class="hl-3">&quot;-l&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">characters</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">opciones</span><span class="hl-1">.</span><span class="hl-5">push</span><span class="hl-1">(</span><span class="hl-3">&quot;-c&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">wc</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">(</span><span class="hl-3">&quot;wc&quot;</span><span class="hl-1">, </span><span class="hl-2">opciones</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">pipe</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-2">stderr</span><span class="hl-1">.</span><span class="hl-5">pipe</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">);</span><br/><span class="hl-1">      } </span><span class="hl-0">catch</span><span class="hl-1"> (</span><span class="hl-2">error</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-2">error</span><span class="hl-1"> + </span><span class="hl-3">&quot;</span><span class="hl-8">\n</span><span class="hl-3">&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  )</span><br/><span class="hl-1">  .</span><span class="hl-5">command</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-3">&quot;subprocessReadFile&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">&quot;Permite leer los datos de un fichero mediante subprocesos&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-2">file:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Nombre del fichero&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-2">lines:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">alias:</span><span class="hl-1"> </span><span class="hl-3">&quot;l&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Muestra el número de lineas&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;boolean&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-2">words:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">alias:</span><span class="hl-1"> </span><span class="hl-3">&quot;w&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Muestra el número de palabras&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;boolean&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-2">characters:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">alias:</span><span class="hl-1"> </span><span class="hl-3">&quot;c&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Muestra el número de caracteres&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;boolean&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    (</span><span class="hl-2">argv</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">try</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">wc</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">(</span><span class="hl-3">&quot;wc&quot;</span><span class="hl-1">, [</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">file</span><span class="hl-1">]);</span><br/><br/><span class="hl-1">        </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">wcOutput</span><span class="hl-1"> = </span><span class="hl-3">&quot;&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">wcError</span><span class="hl-1"> = </span><span class="hl-3">&quot;&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&quot;data&quot;</span><span class="hl-1">, (</span><span class="hl-2">piece</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> (</span><span class="hl-2">wcOutput</span><span class="hl-1"> += </span><span class="hl-2">piece</span><span class="hl-1">));</span><br/><span class="hl-1">        </span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-2">stderr</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&quot;data&quot;</span><span class="hl-1">, (</span><span class="hl-2">piece</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> (</span><span class="hl-2">wcError</span><span class="hl-1"> += </span><span class="hl-2">piece</span><span class="hl-1">));</span><br/><br/><span class="hl-1">        </span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&quot;close&quot;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">wcOutputAsArray</span><span class="hl-1"> = </span><span class="hl-2">wcOutput</span><br/><span class="hl-1">            .</span><span class="hl-5">substring</span><span class="hl-1">(</span><span class="hl-2">wcOutput</span><span class="hl-1">.</span><span class="hl-5">search</span><span class="hl-1">(</span><span class="hl-9">/</span><span class="hl-10">[</span><span class="hl-9">0-9</span><span class="hl-10">]</span><span class="hl-9">/</span><span class="hl-1">))</span><br/><span class="hl-1">            .</span><span class="hl-5">split</span><span class="hl-1">(</span><span class="hl-9">/\s</span><span class="hl-11">+</span><span class="hl-9">/</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">wcError</span><span class="hl-1"> === </span><span class="hl-3">&quot;&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`Fichero: </span><span class="hl-6">${</span><span class="hl-2">argv</span><span class="hl-12">.</span><span class="hl-2">file</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">lines</span><span class="hl-1">) {</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`Número de lineas: </span><span class="hl-6">${</span><span class="hl-2">wcOutputAsArray</span><span class="hl-12">[</span><span class="hl-4">0</span><span class="hl-12">]</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">);</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">            </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">words</span><span class="hl-1">) {</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`Número de palabras: </span><span class="hl-6">${</span><span class="hl-2">wcOutputAsArray</span><span class="hl-12">[</span><span class="hl-4">1</span><span class="hl-12">]</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">);</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">            </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">characters</span><span class="hl-1">) {</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`Número de caracteres: </span><span class="hl-6">${</span><span class="hl-2">wcOutputAsArray</span><span class="hl-12">[</span><span class="hl-4">2</span><span class="hl-12">]</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">);</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">            </span><span class="hl-0">if</span><span class="hl-1"> (</span><br/><span class="hl-1">              </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">characters</span><span class="hl-1"> === </span><span class="hl-6">undefined</span><span class="hl-1"> &amp;&amp;</span><br/><span class="hl-1">              </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">lines</span><span class="hl-1"> === </span><span class="hl-6">undefined</span><span class="hl-1"> &amp;&amp;</span><br/><span class="hl-1">              </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">words</span><span class="hl-1"> === </span><span class="hl-6">undefined</span><br/><span class="hl-1">            ) {</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`Número de lineas: </span><span class="hl-6">${</span><span class="hl-2">wcOutputAsArray</span><span class="hl-12">[</span><span class="hl-4">0</span><span class="hl-12">]</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">);</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`Número de palabras: </span><span class="hl-6">${</span><span class="hl-2">wcOutputAsArray</span><span class="hl-12">[</span><span class="hl-4">1</span><span class="hl-12">]</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">);</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`Número de caracteres: </span><span class="hl-6">${</span><span class="hl-2">wcOutputAsArray</span><span class="hl-12">[</span><span class="hl-4">2</span><span class="hl-12">]</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">);</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">          } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`Fichero </span><span class="hl-6">${</span><span class="hl-2">argv</span><span class="hl-12">.</span><span class="hl-2">file</span><span class="hl-6">}</span><span class="hl-3"> no encontrado`</span><span class="hl-1">);</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">      } </span><span class="hl-0">catch</span><span class="hl-1"> (</span><span class="hl-2">error</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-2">error</span><span class="hl-1"> + </span><span class="hl-3">&quot;</span><span class="hl-8">\n</span><span class="hl-3">&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  )</span><br/><span class="hl-1">  .</span><span class="hl-5">help</span><span class="hl-1">().</span><span class="hl-2">argv</span><span class="hl-1">;</span><br/>
</code></pre>
<p>Podemos diferenciar los dos comandos <code>pipeReadFile</code> y <code>subprocessReadFile</code>, a los cuales se le pasan como parámetros el fichero y tiene las opciones para los datos mostrados (en caso de usar otras opciones no manejadas, el yargs las ignora). Luego de esto, difiere según el método:</p>
<ul>
<li><code>pipeReadFile</code>: Se almacenan los argumentos en una variable y se llama con <code>spawn()</code> al comando wc con el fichero y los argumentos, y se redirige la salida del spawn a la del proceso haciendo uso de pipe.</li>
<li><code>subprocessReadFile</code>: Se llama con <code>spawn()</code> al comando wc sin argumentos y se almacena la salida del proceso (y los errores) en dos variables (wcOutput y wcError) haciendo uso del evento <code>data</code>. Luego, según haya algo en la salida de error o no, se imprime lo deseado según las opciones empleadas o una salida que muestra que el fichero no fue encontrado.</li>
</ul>

<a href="#23-ejercicio-3---funkopop" id="23-ejercicio-3---funkopop" style="color: inherit; text-decoration: none;">
  <h3>2.3. Ejercicio 3 - funkoPop</h3>
</a>
<p>A partir de lo realizado en la práctica 9, tenemos que reescribir código para que se hagan comunicaciones entre un servidor y un cliente haciendo uso de sockets. El cliente solicitará la información y la enviará al servidor, el cual ofrecerá una respuesta. Se ha conseguido implementar este proceso para casi todos los métodos (a excepción de mostrar y listar funko). Observemos el código del cliente:</p>
<pre><code class="language-typescript"><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">yargs</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;yargs&quot;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">hideBin</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;yargs/helpers&quot;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">chalk</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;chalk&quot;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">net</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;net&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">Funko</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;./Funko.js&quot;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">Generos</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;./Generos.js&quot;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">Tipos</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;./Tipos.js&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">log</span><span class="hl-1"> = </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-2">log</span><span class="hl-1">;</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">client</span><span class="hl-1"> = </span><span class="hl-2">net</span><span class="hl-1">.</span><span class="hl-5">connect</span><span class="hl-1">({ </span><span class="hl-2">port:</span><span class="hl-1"> </span><span class="hl-4">60606</span><span class="hl-1"> });</span><br/><br/><span class="hl-5">yargs</span><span class="hl-1">(</span><span class="hl-5">hideBin</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">))</span><br/><span class="hl-1">  .</span><span class="hl-5">command</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-3">&quot;addUser&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">&quot;Permite añadir un usuario&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-2">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Nombre del usuario&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    (</span><span class="hl-2">argv</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">({ </span><span class="hl-2">command:</span><span class="hl-1"> </span><span class="hl-3">&quot;addUser&quot;</span><span class="hl-1">, </span><span class="hl-2">user:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1"> }) + </span><span class="hl-3">&quot;</span><span class="hl-8">\n</span><span class="hl-3">&quot;</span><br/><span class="hl-1">      );</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  )</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  ...</span><br/><br/><span class="hl-1">  .</span><span class="hl-5">command</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-3">&quot;addFunko&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">&quot;Añade un funko&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-2">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Usuario del Funko&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-2">id:</span><span class="hl-1"> { </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;ID del Funko&quot;</span><span class="hl-1">, </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;number&quot;</span><span class="hl-1">, </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1"> },</span><br/><span class="hl-1">      </span><span class="hl-2">name:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Nombre del Funko&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-2">desc:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Descripción del Funko&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-2">type:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Tipo del Funko&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-2">genre:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Género del Funko&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-2">franchise:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Franquicia del Funko&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-2">number:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Número del Funko&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;number&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-2">exclusive:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Exclusividad del Funko&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;boolean&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-2">special:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Características Especiales del Funko&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-2">value:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Valor del Funko&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;number&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    (</span><span class="hl-2">argv</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">try</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">funko</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-5">Funko</span><span class="hl-1">(</span><br/><span class="hl-1">          </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">name</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">desc</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-13">Tipos</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">genre</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-13">Generos</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">franchise</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">number</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">exclusive</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">special</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">value</span><br/><span class="hl-1">        );</span><br/><span class="hl-1">        </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><br/><span class="hl-1">          </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">({</span><br/><span class="hl-1">            </span><span class="hl-2">command:</span><span class="hl-1"> </span><span class="hl-3">&quot;addFunko&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">user:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">funko:</span><span class="hl-1"> </span><span class="hl-2">funko</span><span class="hl-1">,</span><br/><span class="hl-1">          }) + </span><span class="hl-3">&quot;</span><span class="hl-8">\n</span><span class="hl-3">&quot;</span><br/><span class="hl-1">        );</span><br/><span class="hl-1">      } </span><span class="hl-0">catch</span><span class="hl-1"> (</span><span class="hl-2">error</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-2">error</span><span class="hl-1"> + </span><span class="hl-3">&quot;</span><span class="hl-8">\n</span><span class="hl-3">&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  )</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  ...</span><br/><br/><span class="hl-1">  .</span><span class="hl-5">command</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-3">&quot;deleteFunko&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-3">&quot;Elimina un funko&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-2">user:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Usuario del Funko&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-2">id:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;ID del Funko&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;number&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    (</span><span class="hl-2">argv</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">({</span><br/><span class="hl-1">          </span><span class="hl-2">command:</span><span class="hl-1"> </span><span class="hl-3">&quot;deleteFunko&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">user:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">id:</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1">,</span><br/><span class="hl-1">        }) + </span><span class="hl-3">&quot;</span><span class="hl-8">\n</span><span class="hl-3">&quot;</span><br/><span class="hl-1">      );</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  )</span><br/><span class="hl-1">  .</span><span class="hl-5">help</span><span class="hl-1">().</span><span class="hl-2">argv</span><span class="hl-1">;</span><br/><br/><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">datos</span><span class="hl-1"> = </span><span class="hl-3">&quot;&quot;</span><span class="hl-1">;</span><br/><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&quot;data&quot;</span><span class="hl-1">, (</span><span class="hl-2">dataChunk</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">datos</span><span class="hl-1"> += </span><span class="hl-2">dataChunk</span><span class="hl-1">;</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&quot;end&quot;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">message</span><span class="hl-1"> = </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">parse</span><span class="hl-1">(</span><span class="hl-2">datos</span><span class="hl-1">.</span><span class="hl-5">toString</span><span class="hl-1">());</span><br/><br/><span class="hl-1">  </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">success</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">msg</span><span class="hl-1"> + </span><span class="hl-3">`</span><span class="hl-8">\n</span><span class="hl-3">`</span><span class="hl-1">));</span><br/><span class="hl-1">  } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">((</span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">msg</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-13">Error</span><span class="hl-1">) + </span><span class="hl-3">&quot;</span><span class="hl-8">\n</span><span class="hl-3">&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code></pre>
<p>Los principales cambios que se observan es la conexión que se crea a traves del puerto 60606, así como que los comandos ahora solo se dedican a construir un mensaje en formáto JSON (y los funkos si es necesario, aunque se podrían haber pasado los parámetros al servidor y que directamente se construyera en él), el cual se enviará al servidor mediante <code>write()</code>. Finalmente observamos los eventos data, que recogen la información que llega y las guarda en una variable, y el evento end que a partir del JSON que llega de vuelta y según el mensaje sea exitoso o no (lo sabremos a partir del parámetro success), imprime el mensaje en verde o rojo.</p>
<p>Ahora mostraremos el código del servidor:</p>
<pre><code class="language-typescript"><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">net</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;net&quot;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">Funko</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;./Funko.js&quot;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">Generos</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;./Generos.js&quot;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">Gestor</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;./Gestor.js&quot;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">Tipos</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;./Tipos.js&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-2">net</span><br/><span class="hl-1">  .</span><span class="hl-5">createServer</span><span class="hl-1">((</span><span class="hl-2">connection</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&quot;Un cliente se ha conectado conectado.&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-1">    </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&quot;data&quot;</span><span class="hl-1">, (</span><span class="hl-2">datos</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">message</span><span class="hl-1"> = </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">parse</span><span class="hl-1">(</span><span class="hl-2">datos</span><span class="hl-1">.</span><span class="hl-5">toString</span><span class="hl-1">());</span><br/><span class="hl-1">      </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">funko2</span><span class="hl-1">: </span><span class="hl-13">Funko</span><span class="hl-1"> = </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">parse</span><span class="hl-1">(</span><span class="hl-2">datos</span><span class="hl-1">.</span><span class="hl-5">toString</span><span class="hl-1">());</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">funko</span><span class="hl-1"> !== </span><span class="hl-6">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-2">funko2</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-5">Funko</span><span class="hl-1">(</span><br/><span class="hl-1">          </span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">_id</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">_nombre</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">_descripcion</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">_tipo</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-13">Tipos</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">_genero</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-13">Generos</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">_franquicia</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">_numero</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">_exclusivo</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">_caracteristicaEsp</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">_valor</span><br/><span class="hl-1">        );</span><br/><span class="hl-1">      }</span><br/><br/><span class="hl-1">      </span><span class="hl-0">try</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">switch</span><span class="hl-1"> (</span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">command</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-3">&quot;addUser&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">            </span><span class="hl-2">Gestor</span><span class="hl-1">.</span><span class="hl-5">addUser</span><span class="hl-1">(</span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><br/><span class="hl-1">              </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">({</span><br/><span class="hl-1">                </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-2">msg:</span><span class="hl-1"> </span><span class="hl-3">`En usuario </span><span class="hl-6">${</span><span class="hl-2">message</span><span class="hl-12">.</span><span class="hl-2">user</span><span class="hl-6">}</span><span class="hl-3"> ha sido añadido correctamente a la base.`</span><span class="hl-1">,</span><br/><span class="hl-1">              }) + </span><span class="hl-3">&quot;</span><span class="hl-8">\n</span><span class="hl-3">&quot;</span><br/><span class="hl-1">            );</span><br/><span class="hl-1">            </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">          </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-3">&quot;deleteUser&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">            </span><span class="hl-2">Gestor</span><span class="hl-1">.</span><span class="hl-5">deleteUser</span><span class="hl-1">(</span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><br/><span class="hl-1">              </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">({</span><br/><span class="hl-1">                </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-2">msg:</span><span class="hl-1"> </span><span class="hl-3">`En usuario </span><span class="hl-6">${</span><span class="hl-2">message</span><span class="hl-12">.</span><span class="hl-2">user</span><span class="hl-6">}</span><span class="hl-3"> ha sido eliminado correctamente a la base.`</span><span class="hl-1">,</span><br/><span class="hl-1">              }) + </span><span class="hl-3">&quot;</span><span class="hl-8">\n</span><span class="hl-3">&quot;</span><br/><span class="hl-1">            );</span><br/><span class="hl-1">            </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">          </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-3">&quot;listUser&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">            </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><br/><span class="hl-1">              </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">({</span><br/><span class="hl-1">                </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-2">msg:</span><span class="hl-1"> </span><span class="hl-2">Gestor</span><span class="hl-1">.</span><span class="hl-5">userList</span><span class="hl-1">().</span><span class="hl-5">join</span><span class="hl-1">(</span><span class="hl-3">&quot;</span><span class="hl-8">\n</span><span class="hl-3">&quot;</span><span class="hl-1">) + </span><span class="hl-3">&quot;</span><span class="hl-8">\n</span><span class="hl-3">&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">              }) + </span><span class="hl-3">&quot;</span><span class="hl-8">\n</span><span class="hl-3">&quot;</span><br/><span class="hl-1">            );</span><br/><span class="hl-1">            </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">          </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-3">&quot;addFunko&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">            </span><span class="hl-2">Gestor</span><span class="hl-1">.</span><span class="hl-5">addFunko</span><span class="hl-1">(</span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">, </span><span class="hl-2">funko2</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><br/><span class="hl-1">              </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">({</span><br/><span class="hl-1">                </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-2">msg:</span><span class="hl-1"> </span><span class="hl-3">`El funko del usuario </span><span class="hl-6">${</span><span class="hl-2">message</span><span class="hl-12">.</span><span class="hl-2">user</span><span class="hl-6">}</span><span class="hl-3"> ha sido añadido.`</span><span class="hl-1">,</span><br/><span class="hl-1">              }) + </span><span class="hl-3">&quot;</span><span class="hl-8">\n</span><span class="hl-3">&quot;</span><br/><span class="hl-1">            );</span><br/><span class="hl-1">            </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">          </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-3">&quot;modFunko&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">            </span><span class="hl-2">Gestor</span><span class="hl-1">.</span><span class="hl-5">addFunko</span><span class="hl-1">(</span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">, </span><span class="hl-2">funko2</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><br/><span class="hl-1">              </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">({</span><br/><span class="hl-1">                </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-2">msg:</span><span class="hl-1"> </span><span class="hl-3">`El funko del usuario </span><span class="hl-6">${</span><span class="hl-2">message</span><span class="hl-12">.</span><span class="hl-2">user</span><span class="hl-6">}</span><span class="hl-3"> ha sido modificado.`</span><span class="hl-1">,</span><br/><span class="hl-1">              }) + </span><span class="hl-3">&quot;</span><span class="hl-8">\n</span><span class="hl-3">&quot;</span><br/><span class="hl-1">            );</span><br/><span class="hl-1">            </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">          </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-3">&quot;deleteFunko&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">            </span><span class="hl-2">Gestor</span><span class="hl-1">.</span><span class="hl-5">deleteFunko</span><span class="hl-1">(</span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1">, </span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><br/><span class="hl-1">              </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">({</span><br/><span class="hl-1">                </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-2">msg:</span><span class="hl-1"> </span><span class="hl-3">`El funko con id </span><span class="hl-6">${</span><span class="hl-2">message</span><span class="hl-12">.</span><span class="hl-2">id</span><span class="hl-6">}</span><span class="hl-3"> del usuario </span><span class="hl-6">${</span><span class="hl-2">message</span><span class="hl-12">.</span><span class="hl-2">user</span><span class="hl-6">}</span><span class="hl-3"> ha sido eliminado.`</span><span class="hl-1">,</span><br/><span class="hl-1">              }) + </span><span class="hl-3">&quot;</span><span class="hl-8">\n</span><span class="hl-3">&quot;</span><br/><span class="hl-1">            );</span><br/><span class="hl-1">            </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">          </span><span class="hl-0">default</span><span class="hl-1">:</span><br/><span class="hl-1">            </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">end</span><span class="hl-1">();</span><br/><span class="hl-1">      } </span><span class="hl-0">catch</span><span class="hl-1"> (</span><span class="hl-2">error</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">error</span><span class="hl-1"> </span><span class="hl-6">instanceof</span><span class="hl-1"> </span><span class="hl-13">Error</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><br/><span class="hl-1">            </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">({ </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1">, </span><span class="hl-2">msg:</span><span class="hl-1"> </span><span class="hl-2">error</span><span class="hl-1">.</span><span class="hl-2">message</span><span class="hl-1"> }) + </span><span class="hl-3">&quot;</span><span class="hl-8">\n</span><span class="hl-3">&quot;</span><br/><span class="hl-1">          );</span><br/><span class="hl-1">          </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">end</span><span class="hl-1">();</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-1">    </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&quot;close&quot;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&quot;Conexión finalizada.&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-5">listen</span><span class="hl-1">(</span><span class="hl-4">60606</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&quot;Esperando a la conexión de un cliente, puerto = 60606&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span><br/>
</code></pre>
<p>Ek servidor, el cual espera en el puerto 60606, solo muestra por consola las conexiones y desconexiones. Este contiene dos eventos:</p>
<ul>
<li>El evento <code>data</code>, que al recibir datos primero comprueba si tienen el parámetro funko, para reconstruirlo o no, y a continuación realizará una acción o otra según el parámetro command del JSON recibido. Cada caso se encarga  hacer su labor y reenviar una respuesta exitosa. En caso de cualquier error, el switch está situado dentro de un try que recibirá el error y mandará el mensaje no exitoso con información sobre el error.</li>
<li>El evento <code>close</code> que muestra en la consola que, como se mencionó antes, muestra cuando se termina una conexión.</li>
</ul>
<p>Comando de ejemplo:</p>
<p>node dist/funkoPop/funko-app.js addFunko --user Aday --id 2 --name &quot;Androide 16&quot; --desc &quot;Androide del Doctor Gero&quot; --type &quot;Pop!&quot; --genre Anime --franchise &quot;Dragon Ball&quot; --number 12 --exclusive no --special &quot;Mueve la cabeza&quot; --value 17.99</p>

<a href="#24-ejercicio-pe" id="24-ejercicio-pe" style="color: inherit; text-decoration: none;">
  <h3>2.4. Ejercicio PE</h3>
</a>
<p>En el ejercicio de clase dse debía de hacer un cliente y un servidor, en los que el cliente introduce un comando y se ejecuta en el servidor, devolviendo la salida al cliente. El código del cliente es el siguiente:</p>
<pre><code class="language-typescript"><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">net</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;net&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">length</span><span class="hl-1"> &lt; </span><span class="hl-4">3</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&quot;Por favor, inserte un comando.&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">} </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">client</span><span class="hl-1"> = </span><span class="hl-2">net</span><span class="hl-1">.</span><span class="hl-5">connect</span><span class="hl-1">({ </span><span class="hl-2">port:</span><span class="hl-1"> </span><span class="hl-4">64395</span><span class="hl-1"> });</span><br/><br/><span class="hl-1">  </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&quot;connect&quot;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">argumentos</span><span class="hl-1">: </span><span class="hl-13">string</span><span class="hl-1">[] = [];</span><br/><span class="hl-1">    </span><span class="hl-0">for</span><span class="hl-1"> (</span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">i</span><span class="hl-1"> = </span><span class="hl-4">3</span><span class="hl-1">; </span><span class="hl-2">i</span><span class="hl-1"> &lt; </span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">length</span><span class="hl-1">; ++</span><span class="hl-2">i</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-2">argumentos</span><span class="hl-1">.</span><span class="hl-5">push</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">[</span><span class="hl-2">i</span><span class="hl-1">].</span><span class="hl-5">toString</span><span class="hl-1">());</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><br/><span class="hl-1">      </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">({ </span><span class="hl-2">command:</span><span class="hl-1"> </span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">[</span><span class="hl-4">2</span><span class="hl-1">], </span><span class="hl-2">arg:</span><span class="hl-1"> </span><span class="hl-2">argumentos</span><span class="hl-1"> }) + </span><span class="hl-3">&quot;</span><span class="hl-8">\n</span><span class="hl-3">&quot;</span><br/><span class="hl-1">    );</span><br/><span class="hl-1">  });</span><br/><br/><span class="hl-1">  </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">datos</span><span class="hl-1"> = </span><span class="hl-3">&quot;&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&quot;data&quot;</span><span class="hl-1">, (</span><span class="hl-2">dataChunk</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">datos</span><span class="hl-1"> += </span><span class="hl-2">dataChunk</span><span class="hl-1">;</span><br/><span class="hl-1">  });</span><br/><br/><span class="hl-1">  </span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&quot;end&quot;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">message</span><span class="hl-1"> = </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">parse</span><span class="hl-1">(</span><span class="hl-2">datos</span><span class="hl-1">.</span><span class="hl-5">toString</span><span class="hl-1">());</span><br/><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> === </span><span class="hl-3">&quot;accept&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&quot;El comando se ha ejecutado correctamente.&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">result</span><span class="hl-1">);</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> === </span><span class="hl-3">&quot;error&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`Error: </span><span class="hl-6">${</span><span class="hl-2">message</span><span class="hl-12">.</span><span class="hl-2">error</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">);</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`El mensaje </span><span class="hl-6">${</span><span class="hl-2">message</span><span class="hl-12">.</span><span class="hl-2">type</span><span class="hl-6">}</span><span class="hl-3"> no es válido`</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Se observa que lo primero que se hace es comprobrar que hayan tres o más argumentos (el tercero es teóricamente el comando). A partir de eso se busca la conexión en el puerto 64395, en la cual al conectar y mediante el evento <code>connect</code>, mete los argumentos en un array y manda el comando y los argumentos en un JSON mediante <code>write()</code>. Observamos más abajo dos manejadores de eventos: <code>data</code> que va almacenando los datos mientras llegan y <code>end</code>, que marca el final parcial del cliente. En este último, según el parámetro type del JSON recibido se maneja la respuesta.</p>
<p>El código del servidor es el siguiente:</p>
<pre><code class="language-typescript"><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">net</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;net&quot;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">spawn</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;child_process&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-2">net</span><br/><span class="hl-1">  .</span><span class="hl-5">createServer</span><span class="hl-1">((</span><span class="hl-2">connection</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&quot;Un cliente se ha conectado conectado.&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-1">    </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&quot;data&quot;</span><span class="hl-1">, (</span><span class="hl-2">datos</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">message</span><span class="hl-1"> = </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">parse</span><span class="hl-1">(</span><span class="hl-2">datos</span><span class="hl-1">.</span><span class="hl-5">toString</span><span class="hl-1">());</span><br/><span class="hl-1">      </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">comando</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">(</span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">command</span><span class="hl-1">, </span><span class="hl-2">message</span><span class="hl-1">.</span><span class="hl-2">arg</span><span class="hl-1">);</span><br/><br/><span class="hl-1">      </span><span class="hl-2">comando</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&quot;data&quot;</span><span class="hl-1">, (</span><span class="hl-2">data</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><br/><span class="hl-1">          </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">({ </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;accept&quot;</span><span class="hl-1">, </span><span class="hl-2">result:</span><span class="hl-1"> </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-5">toString</span><span class="hl-1">() }) + </span><span class="hl-3">&quot;</span><span class="hl-8">\n</span><span class="hl-3">&quot;</span><br/><span class="hl-1">        );</span><br/><span class="hl-1">        </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">end</span><span class="hl-1">();</span><br/><span class="hl-1">      });</span><br/><br/><span class="hl-1">      </span><span class="hl-2">comando</span><span class="hl-1">.</span><span class="hl-2">stderr</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&quot;error&quot;</span><span class="hl-1">, (</span><span class="hl-2">data</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><br/><span class="hl-1">          </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">({ </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;error&quot;</span><span class="hl-1">, </span><span class="hl-2">result:</span><span class="hl-1"> </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-5">toString</span><span class="hl-1">() }) + </span><span class="hl-3">&quot;</span><span class="hl-8">\n</span><span class="hl-3">&quot;</span><br/><span class="hl-1">        );</span><br/><span class="hl-1">        </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">end</span><span class="hl-1">();</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-1">    </span><span class="hl-2">connection</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&quot;close&quot;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&quot;Conexión finalizada.&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">  .</span><span class="hl-5">listen</span><span class="hl-1">(</span><span class="hl-4">64395</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&quot;Esperando a la conexión de un cliente, puerto = 64395&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span>
</code></pre>
<p>Como observamos, escucha en el puerto 64395. El manejador principal del servidor es del evento <code>data</code>, el cual al recibir los datos, ejecuta el comando con los argumentos y devuelve la salida del comando (ya sea mediante stdout o stderr) al cliente en un JSON que marca si el comando fue satisfactorio o no, junto al resultado.</p>

<a href="#3-conclusiones-personales" id="3-conclusiones-personales" style="color: inherit; text-decoration: none;">
  <h2>3. Conclusiones (personales)</h2>
</a>
<p>El temario que se ha trabajado en esta práctica es un temario complicado. No es nada facil trabajar con procesos asíncronos (además de que apenas los hemos tocado a lo largo de la carrera), pero al final muchas aplicaciones se basan en la comunicación de procesos mediante sockets, por lo que es algo importante que hay que aprender.</p>
<p>Como se observa a lo largo de la práctica, en mi caso ha sido un desastre: Por un lado no hay test, por otro lado hay partes incompletas, etc. Después del desastre de modificación, directamente pensé no entregar esta práctica, pero me lo planteé como un reto y conseguí sacar lo que hay aquí, pero no termino de estar contento. Hubo tiempo para hacerlo, pero la falta de ganas debido a la sobrecarga de trabajo (hay otras tantas cosas que hacer y estudiar) y la complicación del temario han hecho que mi entrega sea precaria. Pero lo hecho, hecho está, yolo me queda seguir aprendiendo para siguientes entregas.</p>

<a href="#4-referencias-bibliográficas" id="4-referencias-bibliográficas" style="color: inherit; text-decoration: none;">
  <h2>4. Referencias bibliográficas</h2>
</a>
<ul>
<li><a href="https://ull-esit-inf-dsi-2223.github.io/prct10-fs-proc-sockets-funko-app/">Guión de la práctica</a></li>
<li><a href="https://nodejs.org/docs/latest-v19.x/api/fs.html">Apuntes sobre la API proporcionada por Node.js</a></li>
<li><a href="https://ull-esit-inf-dsi-2223.github.io/typescript-theory/typescript-solid.html">Principios Solid</a></li>
</ul>
<pre><code class="language-typescript">
</code></pre>
</div></div>
<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<nav class="tsd-navigation primary">
<details class="tsd-index-accordion" open><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Modules</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li class="current selected"><a href="modules.html">ull-<wbr/>esit-<wbr/>inf-<wbr/>dsi-<wbr/>22-<wbr/>23-<wbr/>prct10-<wbr/>fs-<wbr/>proc-<wbr/>sockets-<wbr/>funko-<wbr/>app-<wbr/>alu0101437538</a>
<ul>
<li class="tsd-kind-module"><a href="modules/ejercicio_2_app.html">ejercicio-<wbr/>2/app</a></li>
<li class="tsd-kind-module"><a href="modules/ejercicio_pe_Client.html">ejercicio-<wbr/>pe/<wbr/>Client</a></li>
<li class="tsd-kind-module"><a href="modules/ejercicio_pe_Server.html">ejercicio-<wbr/>pe/<wbr/>Server</a></li>
<li class="tsd-kind-module"><a href="modules/funkoPop_Funko.html">funko<wbr/>Pop/<wbr/>Funko</a></li>
<li class="tsd-kind-module"><a href="modules/funkoPop_Generos.html">funko<wbr/>Pop/<wbr/>Generos</a></li>
<li class="tsd-kind-module"><a href="modules/funkoPop_Gestor.html">funko<wbr/>Pop/<wbr/>Gestor</a></li>
<li class="tsd-kind-module"><a href="modules/funkoPop_Tipos.html">funko<wbr/>Pop/<wbr/>Tipos</a></li>
<li class="tsd-kind-module"><a href="modules/funkoPop_funko_app.html">funko<wbr/>Pop/funko-<wbr/>app</a></li>
<li class="tsd-kind-module"><a href="modules/funkoPop_funko_server.html">funko<wbr/>Pop/funko-<wbr/>server</a></li>
<li class="tsd-kind-module"><a href="modules/funkoPop_request_types.html">funko<wbr/>Pop/request-<wbr/>types</a></li></ul></li></ul></div></details></nav></div></div>
<div class="container tsd-generator">
<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div>
<div class="overlay"></div><script src="assets/main.js"></script></body></html>